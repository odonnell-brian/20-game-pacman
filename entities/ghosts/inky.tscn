[gd_scene load_steps=30 format=3 uid="uid://d0dfye1mwt5ks"]

[ext_resource type="Script" uid="uid://dumtgniih6m1c" path="res://entities/ghosts/ghost.gd" id="1_iox6i"]
[ext_resource type="Texture2D" uid="uid://wajbqq8nucsb" path="res://entities/assets/sprites.png" id="2_8sgo8"]
[ext_resource type="PackedScene" uid="uid://bdj3y3ob2xjk1" path="res://common/components/movement/movement_component.tscn" id="3_y24em"]
[ext_resource type="PackedScene" uid="uid://bq64fxqg3630h" path="res://common/components/effects/direction_based_animation_component.tscn" id="4_uhaun"]
[ext_resource type="PackedScene" uid="uid://wewnbaum7gh6" path="res://common/components/movement/ai/ghost_behavior_component.tscn" id="5_mptci"]
[ext_resource type="PackedScene" uid="uid://dhw1copldk1vx" path="res://common/components/movement/ai/move_states/ghost_spawn_state.tscn" id="6_0xs2q"]
[ext_resource type="PackedScene" uid="uid://bnbbaponsqoc6" path="res://common/components/movement/ai/move_states/ghost_exit_state.tscn" id="7_mifyn"]
[ext_resource type="PackedScene" uid="uid://0m2eab6xfw3g" path="res://common/components/movement/ai/move_states/chase/blinky_chase_state.tscn" id="8_dhrbk"]
[ext_resource type="PackedScene" uid="uid://dywlflexae2le" path="res://common/components/movement/ai/move_states/ghost_scatter_move_state.tscn" id="9_5y2g5"]
[ext_resource type="Script" uid="uid://37am4tykrwmi" path="res://common/components/movement/ai/move_states/chase/inky_chase_state.gd" id="9_8sgo8"]
[ext_resource type="PackedScene" uid="uid://mfmtmt3b0irg" path="res://common/components/movement/ai/move_states/ghost_frightened_state.tscn" id="10_keslu"]
[ext_resource type="PackedScene" uid="uid://bb8cexvsh364n" path="res://common/components/movement/ai/move_states/ghost_respawn_state.tscn" id="11_i36oy"]

[sub_resource type="AtlasTexture" id="AtlasTexture_mxh1x"]
atlas = ExtResource("2_8sgo8")
region = Rect2(179, 80, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_24agq"]
atlas = ExtResource("2_8sgo8")
region = Rect2(147, 80, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_s1ax8"]
atlas = ExtResource("2_8sgo8")
region = Rect2(131, 80, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_rlix0"]
atlas = ExtResource("2_8sgo8")
region = Rect2(163, 80, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_orsjl"]
atlas = ExtResource("2_8sgo8")
region = Rect2(131, 64, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_8dpec"]
atlas = ExtResource("2_8sgo8")
region = Rect2(147, 64, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_tkbly"]
atlas = ExtResource("2_8sgo8")
region = Rect2(163, 64, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_pa65v"]
atlas = ExtResource("2_8sgo8")
region = Rect2(179, 64, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_iox6i"]
atlas = ExtResource("2_8sgo8")
region = Rect2(99, 96, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_8sgo8"]
atlas = ExtResource("2_8sgo8")
region = Rect2(115, 96, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_y24em"]
atlas = ExtResource("2_8sgo8")
region = Rect2(35, 96, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_uhaun"]
atlas = ExtResource("2_8sgo8")
region = Rect2(51, 96, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_mptci"]
atlas = ExtResource("2_8sgo8")
region = Rect2(3, 96, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_0xs2q"]
atlas = ExtResource("2_8sgo8")
region = Rect2(19, 96, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_mifyn"]
atlas = ExtResource("2_8sgo8")
region = Rect2(67, 96, 16, 16)

[sub_resource type="AtlasTexture" id="AtlasTexture_dhrbk"]
atlas = ExtResource("2_8sgo8")
region = Rect2(83, 96, 16, 16)

[sub_resource type="SpriteFrames" id="SpriteFrames_o4xm5"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mxh1x")
}],
"loop": true,
"name": &"eyes_down",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_24agq")
}],
"loop": true,
"name": &"eyes_left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_s1ax8")
}],
"loop": true,
"name": &"eyes_right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_rlix0")
}],
"loop": true,
"name": &"eyes_up",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_orsjl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8dpec")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tkbly")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pa65v")
}],
"loop": true,
"name": &"frightened",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_iox6i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8sgo8")
}],
"loop": true,
"name": &"move_down",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_y24em")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uhaun")
}],
"loop": true,
"name": &"move_left",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mptci")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0xs2q")
}],
"loop": true,
"name": &"move_right",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mifyn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dhrbk")
}],
"loop": true,
"name": &"move_up",
"speed": 10.0
}]

[node name="Inky" type="Node2D" node_paths=PackedStringArray("movement_component")]
script = ExtResource("1_iox6i")
ghost_name = 2
movement_component = NodePath("MovementComponent")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_o4xm5")
animation = &"move_down"
autoplay = "move_left"

[node name="MovementComponent" parent="." node_paths=PackedStringArray("direction_component") instance=ExtResource("3_y24em")]
direction_component = NodePath("../BehaviorComponent")
continue_if_no_input = false

[node name="DirectionBasedAnimationComponent" parent="." node_paths=PackedStringArray("animated_sprite") instance=ExtResource("4_uhaun")]
animated_sprite = NodePath("../AnimatedSprite2D")

[node name="BehaviorComponent" parent="." node_paths=PackedStringArray("movement_component", "animation_component") instance=ExtResource("5_mptci")]
movement_component = NodePath("../MovementComponent")
animation_component = NodePath("../DirectionBasedAnimationComponent")
scatter_target = Vector2i(24, 4)

[node name="Spawn" parent="BehaviorComponent" node_paths=PackedStringArray("sprite_to_offset") instance=ExtResource("6_0xs2q")]
sprite_to_offset = NodePath("../../AnimatedSprite2D")
time_to_exit = 20.0

[node name="Exit" parent="BehaviorComponent" node_paths=PackedStringArray("sprite_to_offset") instance=ExtResource("7_mifyn")]
sprite_to_offset = NodePath("../../AnimatedSprite2D")

[node name="Chase" parent="BehaviorComponent" instance=ExtResource("8_dhrbk")]
script = ExtResource("9_8sgo8")

[node name="Scatter" parent="BehaviorComponent" instance=ExtResource("9_5y2g5")]
scatter_target = Vector2i(30, 29)

[node name="Frightened" parent="BehaviorComponent" instance=ExtResource("10_keslu")]

[node name="Respawn" parent="BehaviorComponent" node_paths=PackedStringArray("sprite_to_offset") instance=ExtResource("11_i36oy")]
sprite_to_offset = NodePath("../../AnimatedSprite2D")
spawn_tile = Vector2i(12, 16)
